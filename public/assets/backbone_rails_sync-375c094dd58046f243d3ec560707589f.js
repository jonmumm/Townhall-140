((function(){var a={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},b=function(a){return!a||!a.url?null:_.isFunction(a.url)?a.url():a.url},c=function(){throw new Error("A 'url' property or function must be specified")};Backbone.sync=function(d,e,f){var g=a[d],h=_.extend({type:g,dataType:"json",beforeSend:function(a){var b=$('meta[name="csrf-token"]').attr("content");b&&a.setRequestHeader("X-CSRF-Token",b)}},f);h.url||(h.url=b(e)||c());if(!h.data&&e&&(d=="create"||d=="update")){h.contentType="application/json";var i={};e.paramRoot?i[e.paramRoot]=e.toJSON():i=e.toJSON(),h.data=JSON.stringify(i)}return h.type!=="GET"&&(h.processData=!1),$.ajax(h)}})).call(this)