((function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};TownHall140.Views.QuestionModalView=Backbone.View.extend({initialize:function(){return $(document).bind("enterQuestion",$.proxy(this.onEnterQuestion,this)),$(".submit",this.el).click($.proxy(this.onSubmitClick,this)),$("input",this.el).keypress($.proxy(this.onInputKey,this)),this.el.bind("hide",this.onModalHide)},onEnterQuestion:function(){return this.render()},onSubmitClick:function(){return this.postMessage($("input",this.el).val())},onInputKey:function(a){if(a.keyCode===13)return this.postMessage($("input",this.el).val())},onModalHide:function(){return $(document).trigger("joinCancelled")},render:function(){return this.el.modal({backdrop:!0,show:!0})},postMessage:a(function(b){var c,d;c=app.get("show").id;if(b!==""&&!d)return d=!0,$.ajax({type:"post",url:"/shows/"+c+"/questions",data:{body:b},success:a(function(a){return $("#questionModal").modal("hide"),$(document).trigger("enterShow"),d=!1},this),error:a(function(a){return d=!1},this)})},this)})})).call(this)