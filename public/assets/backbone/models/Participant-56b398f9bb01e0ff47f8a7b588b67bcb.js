((function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};TownHall140.Models.Participant=Backbone.Model.extend({initialize:function(){return app.get("session").addEventListener("streamCreated",$.proxy(this.onStreamCreate,this)),this.set({question:new TownHall140.Models.Question}),$.ajax({url:"/shows/"+app.get("show").id+"/questions/"+this.id+"/latest",dataType:"json",success:a(function(a){if(a)return this.get("question").set(a)},this),error:a(function(a){},this)})},defaults:{state:"publish"},onStreamCreate:function(a){var b,c;c=a.streams[0];if(this.id===c.connection.data&&c.connection.connectionId===app.get("session").connection.connectionId)return app.get("role")==="moderator"?b="host":b="queue",this.set({stream:c,state:b})}})})).call(this)